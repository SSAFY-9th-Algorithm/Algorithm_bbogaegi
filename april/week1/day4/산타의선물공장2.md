# 산타의 선물공장2
시간 제한: 1000ms 메모리 제한: 120MB
---
급할 때 선물 공장을 세웠던 산타는 이제 각 벨트의 정보와 선물의 정보를 조회할 수 있는 기능들을 추가하여 새로운 공장을 만들고자 합니다.

#### 1. 공장 설립

선물 공장에 n개의 벨트를 설치하고, 총 m개의 물건을 준비합니다. m개의 선물의 위치가 공백을 사이에 두고 주어집니다. <Figure 1>은 n이 4이고 m이 6인 한 가지 예입니다. 각각 선물의 번호는 오름차순으로 벨트에 쌓입니다.



#### 2. 물건 모두 옮기기

m_src번째 벨트에 있는 선물들을 모두 m_dst번째 벨트의 선물들로 옮깁니다. 옯겨진 선물들은 m_dst 벨트 앞에 위치합니다. 만약 m_src번째 벨트에 선물이 존재하지 않다면 아무것도 옮기지 않아도 됩니다. 옮긴 뒤에 m_dst번째 벨트에 있는 선물들의 개수를 출력합니다.

예로 <Figure 1>에서 2번째에서 4번째로 옮기게 된다면 <Figure 2>처럼 변하게 됩니다. 4번째 벨트의 총 선물 개수인 4를 출력합니다.



#### 3. 앞 물건만 교체하기

m_src번째 벨트에 있는 선물 중 가장 앞에 있는 선물을 m_dst번째 벨트의 선물들 중 가장 앞에 있는 선물과 교체합니다. 둘 중 하나의 벨트에 선물이 아예 존재하지 않다면 교체하지 않고 해당 벨트로 선물을 옮기기만 합니다. 옮긴 뒤에 m_dst번째 벨트에 있는 선물들의 개수를 출력합니다.

예로 <Figure 2>에서 2번째 벨트와 4번째 벨트의 앞 물건만 교체하게 되면 다음과 같이 바뀌고, 3을 출력하게 됩니다.



#### 4. 물건 나누기

m_src번째 벨트에 있는 선물들의 개수를 n이라고 할 때 가장 앞에서 floor(n/2)번째까지 있는 선물을 m_dst번째 벨트 앞으로 옮깁니다. 만약 m_src 벨트에 선물이 1개인 경우에는 선물을 옮기지 않습니다. 옮긴 뒤에 m_dst번째 벨트에 있는 선물들의 개수를 출력합니다.

예로 <Figure 3>에서 4번 벨트에서 2번 벨트로 옮기게 되면 다음과 같이 옮겨지고, 2를 출력하게 됩니다.



#### 5. 선물 정보 얻기

선물 번호 p_num가 주어질 때, 해당 선물의 앞 선물의 번호 a과 뒤 선물의 번호 b라 할 때 a + 2 * b를 출력합니다. 만약 앞 선물이 없는 경우에는 a = -1, 뒤 선물이 없는 경우에는 b = -1을 넣어줍니다.

예로 <Figure 4>에서 p_num이 6인 선물 정보를 구하는 경우에는 2을 출력(4 + -1 * 2)하고, p_num이 5인 선물 정보를 구하는 경우에는 -1이 출력(1 + -1 * 2)되게 됩니다.

####  6. 벨트 정보 얻기

벨트 번호 b_num이 주어질 때, 해당 벨트의 맨 앞에 있는 선물의 번호를 a, 맨 뒤에 있는 선물의 번호를 b, 해당 벨트에 있는 선물의 개수를 c라고 할 때, a + 2*b + 3*c의 값을 출력합니다. 선물이 없는 벨트의 경우에는 a와 b 모두 -1이 됩니다.

예로 <Figure 4>에서 b_num이 1인 벨트의 정보를 구하면 17(1 + 2 * 5 + 3 * 2)을 출력합니다. b_num이 3인 벨트의 정보를 구하면 -3(-1 + -1 * 2 + 0)이 됩니다.

산타가 q번에 걸쳐 명령을 순서대로 진행하며 원하는 결과를 출력하는 프로그램을 작성해보세요.

### 입력 형식
---
첫 번째 줄에 명령의 수 q가 주어집니다.

두 번째 줄부터는 q개의 줄에 걸쳐 명령의 정보가 주어집니다. 각 명령에 따른 형태는 다음과 같습니다.

- 공장 설립

100 n m B_NUM1 B_NUM2 ... B_NUMm 형태로 공백을 사이에 두고 주어집니다. 이는 n개의 벨트와 m개의 선물로 이루어진 공장을 세우며, 선물을 주어진 벨트의 번호대로 1번 벨트부터 n번 벨트에 요청대로 올려줍니다. 이 명령은 항상 첫 번째 명령으로만 주어지며, 항상 주어집니다. 또한, 이 명령에 대해서는 출력할 값이 없습니다.

- 물건 모두 옮기기

200 m_src m_dst 형태로 공백을 사이에 두고 주어집니다. 이 명령에서는 진행 이후 m_dst의 선물의 총 수를 출력합니다. m_src와 m_dst는 같지 않습니다.

- 앞 물건만 교체하기

300 m_src m_dst 형태로 공백을 사이에 두고 주어집니다. 이 명령에서는 진행 이후 m_dst의 선물의 총 수를 출력합니다. m_src와 m_dst는 같지 않습니다.

- 물건 나누기

400 m_src m_dst 형태로 공백을 사이에 두고 주어집니다. 이 명령에서는 진행 이후 m_dst의 선물의 총 수를 출력합니다. m_src와 m_dst는 같지 않습니다. 해당 명령은 최대 100번까지만 주어집니다.

- 선물 정보 얻기

500 p_num 형태로 공백을 사이에 두고 주어집니다. 앞 선물의 번호 a과 뒤 선물의 번호 b라 할 때 a + 2 * b를 출력합니다. 없을 경우에는 각각 -1을 대입합니다.

- 벨트 정보 얻기

600 b_num 형태로 공백을 사이에 두고 주어집니다. 해당 벨트의 맨 앞에 있는 선물의 번호를 a, 맨 뒤에 있는 선물의 번호를 b, 해당 벨트에 있는 선물의 개수를 c라고 할 때, a + 2*b + 3*c의 값을 출력합니다. 없을 경우에는 a, b에 각각 -1을 대입합니다. 이때의 c는 0이 됩니다.

- 1 ≤ q ≤ 100,000
- 2 ≤ n ≤ 100,000
- 1 ≤ m ≤ 100,000
- 1 ≤ p_num ≤ m
- 1 ≤ b_num ≤ n


### 출력 형식
---
산타가 q개의 명령을 진행하면서 출력해야 하는 값을 한 줄에 하나씩 출력합니다.

[문제링크](https://www.codetree.ai/training-field/frequent-problems/santa-gift-factory-2/description?page=3&pageSize=20&username=seed14)
